!function e(t,n,i){function s(r,a){if(!n[r]){if(!t[r]){var u="function"==typeof require&&require;if(!a&&u)return u(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){var n=t[r][1][e];return s(n?n:e)},l,l.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(e,t,n){var i=e("../../lib/plugins/MtEvent.js"),s=e("../../lib/register");s("mtevent",i)},{"../../lib/plugins/MtEvent.js":6,"../../lib/register":7}],2:[function(e,t,n){(function(n){var i=e("../lib/Hub"),s=e("../lib/Tracker"),o=new i(s),r=n.UniversalTrackingObj;o.q=n[r].q||[],o.plugins=n[r].plugins||[],n[r]=function(){o.run.apply(o,arguments)},o.flush(),t.exports=n[r]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../lib/Hub":3,"../lib/Tracker":4}],3:[function(e,t,n){(function(e){var n="default",i=e.document,s=function(t){this.Host=t,this._hosts={},this._pluginClassMap={},this._flushing=this._flushAgain=!1,this._blocking=!1;var n=this;if(i){"complete"!==i.readyState&&(this._blocking=!0);var s;e.onload&&(s=e.onload);var o=function(){n._blocking=!1,n.flush(),s&&s()};e.addEventListener?e.addEventListener("load",o):e.attachEvent?e.attachEvent("onload",o):e.onload=o}};s.prototype={constructor:s,create:function(e,t){var i,s,o,r,a,u=this.plugins,c=this;"string"==typeof e?i=e:(e=e||{},s={},u&&u.length&&e.autorequire!==!1&&(a=e.autoRequire||!0,Object.keys(e).forEach(function(t){0===t.indexOf("p_")&&(o=t.split("_")[1],r=s[o]=s[o]||{},r[t.slice(("p_"+o).length+1)]=e[t])})),delete e.autoRequire,i=e.hostName||n),t?t._isthirdparty=!0:t=new c.Host(e),this._hosts[i]=t,a&&(a.length&&a||u).forEach(function(e){c.run("require",e,s[e])})},register:function(e,t){this._pluginClassMap[e]=t},run:function(){this._run.apply(this,arguments)||this.q.push(arguments)},_run:function(){var e=arguments[0];if(this._blocking&&"register"!=e)return!1;switch(e){case"create":return this.create(arguments[1],arguments[2]),this.flush(),!0;case"register":return this.register(arguments[1],arguments[2]),this.flush(),!0;case"flush":return this.flush(),!0}var t,i,s=e.split(".");1===s.length?(t=n,i=e):(t=s[0],i=s[1]);var o,r=arguments;if("require"===i){if(r=[].slice.call(arguments),!(o=this._pluginClassMap[r[1]]))return!1;r.splice(2,0,o)}var a,u;return(a=this._hosts[t])?(u=[].slice.call(r,1),a._isthirdparty&&a[i]?(a[i].apply(a,u),!0):a.callMethod&&a.callMethod(i,u)?!0:!1):!1},flush:function(){var e=this,t=this.q,n=[];return this._flushing?void(this._flushAgain=!0):(this._flushing=!0,void setTimeout(function(){t.forEach(function(t,i){e._run.apply(e,t)===!1&&n.push(t)}),e.q=n,e._flushing=!1,e._flushAgain&&(e._flushAgain=!1,setTimeout(e.flush.bind(e),0))},0))}},t.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(n){var i=e("./util/tools"),s=e("./util/KeyMirror"),o=e("./augments/Cookie"),r=n.document||{},a=n.location||{},u=n.navigator||{},c=n.screen||{},l="__",f=function(e){e=e||{},this._plugins={},this._attrs={},this._events={},this._logTypes={pageview:this._pageview.bind(this),event:this._event.bind(this)};var t="//report.meituan.com?category=fe_dp_gew",n=window.performance&&performance.timing&&performance.timing.requestStart||Date.now();this.set({siteid:e.siteid||"",clientid:e.clientid||"",sessionid:e.sessionid||"",page:e.page||"",pagealias:e.pagealias||e.page&&""||a.pathname,logcount:0,sendBeacon:e.sendBeacon&&u.sendBeacon,cookieName:e.cookieName,cookieDomain:e.cookieDomain,sessionExpires:e.sessionExpires,timestamp:function(){return Date.now()},time:n,trackingDimensions:{},cookieEnabled:u.cookieEnabled,screen:c.width+"x"+c.height,referrer:r.referrer.substr(0,e.maxReferrer||200),common_fields:["page","clientid","sessionid","siteid","hittype","logcount","timestamp","pagealias","trackingDimensions"],pageviewlog_url:t,pageviewlog_fields:["screen","referrer"],eventlog_url:t,eventlog_fields:[]}),u.cookieEnabled&&this.require("cookie",o)};f.prototype={constructor:f,require:function(e,t,n){var i=new t(this,n);return this._plugins[e]=i,i},callMethod:function(e,t){if("send"===e)return this.send.apply(this,t);var n=e.split(":");if(1===n.length)return this[e]?(this[e].apply(this,t),!0):!1;var i,s,o=n[0];return e=n[1],(i=this._plugins[o])&&(s=i[e])?(s.apply(i,t),!0):!1},addLogType:function(e,t){this._logTypes[e]=t},exec:function(e){e.call(null,this)},send:function(e){var t,n=[].slice.call(arguments,1);"object"==typeof e?(t=e,e=t.hittype):(t={},t.hittype=e),this.set("hittype",e);var i;return(i=this._logTypes[e])?(this.set("logcount",this.get("logcount")+1),i.apply(null,n),!0):!1},set:function(e,t){return e?"string"==typeof e?void this._set(e,t):void Object.keys(e).forEach(function(t){this._set(t,e[t])},this):void 0},_set:function(e,t){var n=this._attrs,i=l+e,s=n[e];return"function"==typeof t?("function"!=typeof s&&(n[i]=s),void(n[e]=t)):(delete n[i],void(this._attrs[e]=t))},get:function(e,t){var n,i=this._attrs,s=l+e;if(t)return i[s];if(n=i[e],"function"==typeof n){var o=n(this);return i[s]=o,o}return n},tag:function(e,t){if(e){var n=this.get("trackingDimensions");if("undefined"!=typeof t)return void(n[e]=t);"undefined"!=typeof n[e]&&delete n[e],i.merge(n,e)}},logwith:function(e,t){var n;n="common"===e?"common_fields":e+"log_fields";var i=this.get(n)||[];Array.isArray(t)||(t=[t]),this.set(n,i.concat(t))},_pageview:function(e){e=e||{},e.logcount=1,e.time=Date.now(),this.set(e);var t=this.prepareData("pageview"),n=this.get("pageviewlog_url");this.sendBeacon(n,t),this.emit("pageview|send","pageview",t,n)},_event:function(e,t,n,s){var o={category:e||"",action:t||"",label:n||""};i.merge(o,s||{});var r=this.prepareData("event",o),a=this.get("eventlog_url");this.sendBeacon(a,r),this.emit("event|send","event",r,a)},prepareData:function(e,t){t=t||{};var n={},s=this.get("common_fields").concat(this.get(e+"log_fields"));return s.forEach(function(e){return e.name?void(n[e.key]=this.get(e.name)):void(n[e]=this.get(e))},this),i.merge(n,t),n},sendBeacon:function(e,t){var n,i={};for(var o in t)n=t[o],"object"==typeof n&&(n=JSON.stringify(n)),i[s.get(o)]=n;this.beacon(e,i)},beacon:function(e,t){var n,i="";for(n in t)i+="&"+n+"="+encodeURIComponent(t[n]);if(i=i.slice(1),this.get("sendBeacon"))return void u.sendBeacon(e,i);var s=e.indexOf("?")<0?i:"&"+i,o=new Image;o.src=e+(-1===e.indexOf("?")?"?"+s:s)},updateKeyMirror:function(){s.set.apply(s,arguments)},on:function(e,t){var n=this._events[e]=this._events[e]||[];n.unshift(t)},off:function(e,t){var n,i=this._events[e]=this._events[e]||[];for(t||(this._events[e]=[]);-1!==(n=i.indexOf(t));)i.splice(n,1)},emit:function(e){var t=e.split("|"),n=arguments;if(t.length>1)return void t.forEach(function(e){var t=[].slice.call(n,1);t.unshift(e),this.emit.apply(this,t)},this);var i=this._events[e]||[],n=arguments;i.forEach(function(e){e.apply(null,[].slice.call(n,1))})}},t.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./augments/Cookie":5,"./util/KeyMirror":10,"./util/tools":11}],5:[function(e,t,n){var i=e("../util/Cookie"),s=function(e){return this.tracker=e,e.get("clientid")&&e.get("sessionid")?void(this._nocookie=!0):(this._cookieName=e.get("cookieName")||s.defaults.cn,this._cookieDomain=e.get("cookieDomain")||s.getHost(),this._sessionExpires=e.get("sessionExpires")||s.defaults.se,void this._update())};s.getHost=function(){var e=location.hostname;return 0===e.indexOf("www.")?e.slice(4):e},s.defaults={cn:"_mtt",VERSION:1,se:18e5},s.prototype={constructor:s,_parse:function(e){var t=e.split("."),n=Date.now(),i=s.defaults.VERSION;return t[0]=i,t[1]=t[1]||Math.round(2147483647*Math.random()).toString(36),t[2]=t[2]||n,t[3]=t[3]||n,t[4]=t[4]?+t[4]:0,n-t[4]>this._sessionExpires&&(t[3]=n),t[4]=n,{clientid:t[1]+"."+t[2],sessionid:t[3],whole:t.join(".")}},_update:function(){var e=i.get(this._cookieName),t=this._parse(e||""),n=this.tracker;n.get("clientid")||n.set("clientid",t.clientid),n.get("sessionid")||n.set("sessionid",t.sessionid),i.set(this._cookieName,t.whole,i.getExpiresDate(730,0,0),"/",this._cookieDomain)}},t.exports=s},{"../util/Cookie":8}],6:[function(e,t,n){var i=e("../util/DOM"),s=e("../util/tools"),o=function(e,t){t=t||{},this.mteventAttr=t.mtevent||"data-mtevent",this.mtnodeAttr=t.mtnode||"data-mteventnd",this.tracker=e,i.on(document.body,"mousedown",this.onmousedown.bind(this),"["+this.mteventAttr+"]")};o.prototype={constructor:o,onmousedown:function(e){var t,n,o,r=e.target,a=e.currenttarget,u=i.ancestors(r,"["+this.mtnodeAttr+"]"),c=a.getAttribute(this.mteventAttr);if(0===c.indexOf("{"))try{t=JSON.parse(c)}catch(l){return}else n=c.split("|"),n.length<3&&n.unshift("Link","Click"),t={},t.ca=n[0],t.ac=n[1],n[2]?o=n[2]:"A"==a.tagName&&(o=a.pathname,o===location.pathname&&(o=a.hash)),t.la=o;if(u.forEach(function(e){try{var n=JSON.parse(e.getAttribute(this.mtnodeAttr));s.merge(t,n)}catch(i){}},this),t.la){var f=t.ca,h=t.ac;o=t.la,delete t.ca,delete t.ac,delete t.la,this.tracker.send("event",f,h,o,t)}}},t.exports=o},{"../util/DOM":9,"../util/tools":11}],7:[function(e,t,n){(function(e){t.exports=function(t,n){var i=e[e.UniversalTrackingObj||"_hub"];i&&i("register",t,n)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){t.exports={getExpiresDate:function(e,t,n){var i=new Date;return"number"==typeof e&&"number"==typeof t&&"number"==typeof t?(i.setDate(i.getDate()+parseInt(e,10)),i.setHours(i.getHours()+parseInt(t,10)),i.setMinutes(i.getMinutes()+parseInt(n,10)),i.toGMTString()):void 0},_getValue:function(e){var t=document.cookie,n=t.indexOf(";",e);return-1==n&&(n=t.length),decodeURIComponent(t.substring(e,n))},get:function(e){for(var t=document.cookie,n=e+"=",i=n.length,s=t.length,o=0;s>o;){var r=o+i;if(t.substring(o,r)===n)return this._getValue(r);if(o=t.indexOf(" ",o)+1,0===o)break}return""},set:function(e,t,n,i,s,o){e.trim()&&(document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+n:"")+(i?"; path="+i:"")+(s?"; domain="+s:"")+(o?"; secure":""))},remove:function(e,t,n){this.get(e)&&(document.cookie=e+"="+(t?"; path="+t:"")+(n?"; domain="+n:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT")}}},{}],9:[function(e,t,n){(function(e){t.exports={addEvent:function(t,n,i,s){if(t.addEventListener)return t.addEventListener(n,i,s),!0;if(t.attachEvent){var o=function(t){t=t||e.event,t.target=t.target||t.srcElement,i(t)},r=t.attachEvent("on"+n,o);return r}},ancestor:function(e,t,n){var i=this._ancestor(e,t,n,!0);return i.length?i[0]:null},ancestors:function(e,t,n){return this._ancestor(e,t,n)},_ancestor:function(e,t,n,i){var s=[];n||(e=e.parentNode);do if(this.simpleMatch(t,e)&&(s.push(e),i))return s;while((e=e.parentNode)&&"HTML"!==e.tagName);return s},hasAttribute:function(e,t){return e.hasAttribute?e.hasAttribute(t):null!==e.getAttribute(t)},simpleMatch:function(e,t){switch(e.slice(0,1)){case".":return t.className.split(" ").indexOf(e.slice(1))>=0;case"[":return this.hasAttribute(t,e.slice(1,-1));default:return t.tagName==e.toUpperCase()}},on:function(e,t,n,i){if(i){var s=n,o=this;n=function(e){var t=e.target,n=o.ancestor(t,i,!0);n&&(e.currenttarget=n,s(e))}}this.addEvent(e,t,n)},createNode:function(e){var t=document.createElement("div");t.innerHTML=e;var n=document.createDocumentFragment(),i=t.childNodes;if(!i.length)return null;for(;i.length;)n.appendChild(i[0]);return n}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){var i=e("./tools"),s={timestamp:"t",siteid:"vid",page:"pid",pagealias:"pg",hittype:"rt",logcount:"seq",abtest:"ab",category:"ec",action:"ea",label:"el",trackingDimensions:"td",screen:"sr",referrer:"rf",clientid:"sid",sessionid:"ssn"};t.exports={get:function(e){return s[e]||e},set:function(e,t){return"object"==typeof e?void i.merge(s,e):void(s[e]=t)}}},{"./tools":11}],11:[function(e,t,n){t.exports={merge:function(e,t,n){"undefined"==typeof n&&(n=!0);for(var i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)?n&&(e[i]=t[i]):e[i]=t[i])}}},{}]},{},[2,1]);
;